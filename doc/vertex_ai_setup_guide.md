# Vertex AI Data Store 생성 및 설정 가이드

빅히스토리 플랫폼의 **이미지 자동 배치 기능**을 활성화하기 위해서는, PDF 검색 시 **"페이지 번호(Page Number)"** 정보가 반드시 반환되어야 합니다.
이를 위해 **문서 청크(Chunking)** 설정이 포함된 새로운 Data Store를 생성해야 합니다.

아래 단계에 따라 설정을 진행해주세요.

---

## 1. 데이터 스토어 생성 시작
1.  **Google Cloud Console** > **Vertex AI Search & Conversation** > **Data Stores** 메뉴로 이동합니다.
2.  **[새 데이터 스토어 만들기]** (Create Data Store) 버튼을 클릭합니다.

## 2. 데이터 소스 선택
*   **소스**: **Cloud Storage**를 선택합니다.
*   **폴더 선택**: 기존에 사용하시던 버킷(`gs://20set-bighistory-raw`)을 찾아 선택합니다.
*   **문서 유형**: **"비정형 문서(Unstructured documents)"**를 선택합니다. (PDF, HTML 등)

## 3. 구성 설정 (⚠ 가장 중요)
이 단계에서 설정을 정확히 해야 합니다.

### 3.1 문서 파서 (Document Parser)
*   **파서 종류**: **"레이아웃 파서(Layout Parser)"**를 선택하세요.
    *   *이유: PDF의 구조(제목, 본문, 표)를 더 정확히 인식합니다.*

### 3.2 문서 청크 처리 (Document Chunking)
이 옵션을 **반드시 활성화(체크)**해야 합니다.

1.  **[고급 청크 처리 구성 사용 설정]** 체크박스를 **선택(Enable)**합니다.
2.  **청크 처리 전략**: **"레이아웃별 청크(Layout-based Chunking)"**를 선택합니다.
    *   *만약 레이아웃별 청크가 보이지 않는다면 "고정 크기(Fixed-length)"를 선택해도 되지만, 페이지 인식을 위해 "목차/제목 포함" 옵션이 있다면 켜주세요.*
    *   **핵심**: 이 옵션을 켜야 AI가 문서를 페이지 단위나 문단 단위로 쪼개서 저장하며, 이때 **페이지 번호 메타데이터**가 생성됩니다.
3.  **청크 크기**: 기본값(예: 500 토큰) 유지.

## 4. 생성 및 연결
1.  **데이터 스토어 이름**: 식별하기 쉬운 이름 입력 (예: `20set-bighistory-chunked-20260110`)
2.  **[만들기]** 버튼 클릭.
3.  생성이 완료되면, 기존에 사용하던 **앱(App)**으로 이동하여:
    *   기존 데이터 스토어 연결 해제
    *   **방금 만든 새 데이터 스토어 연결**

## 5. ID 업데이트 (개발자에게 전달)
생성이 완료되면 **새로운 Data Store ID**를 복사하여 알려주세요.
*   위치: Data Store 상세 화면 상단 정보

---
**확인 사항:**
생성 후 데이터 인덱싱(Indexing)에 시간이 소요될 수 있습니다. 인덱싱이 완료되면 다시 개발자에게 말씀해 주십시오.
